!function(b){var a=function(j,q,h){var o=typeof q=="object";var f;this.startDate=Date.today();this.endDate=Date.today();this.minDate=false;this.maxDate=false;this.changed=false;this.ranges={};this.opens="right";this.cb=function(){};this.format="dd/MM/yyyy";this.separator=" - ";this.showWeekNumbers=false;this.buttonClasses=["btn-success"];this.locale={applyLabel:"Apply",fromLabel:"From",toLabel:"To",weekLabel:"W",customRangeLabel:"Custom Range",daysOfWeek:Date.CultureInfo.shortestDayNames,monthNames:Date.CultureInfo.monthNames,firstDay:0};f=this.locale;this.leftCalendar={month:Date.today().set({day:1,month:this.startDate.getMonth(),year:this.startDate.getFullYear()}),calendar:Array()};this.rightCalendar={month:Date.today().set({day:1,month:this.endDate.getMonth(),year:this.endDate.getFullYear()}),calendar:Array()};this.parentEl="body";this.element=b(j);if(this.element.hasClass("pull-right")){this.opens="left"}if(this.element.is("input")){this.element.on({click:b.proxy(this.show,this),focus:b.proxy(this.show,this)})}else{this.element.on("click",b.proxy(this.show,this))}if(o){if(typeof q.locale=="object"){b.each(f,function(r,c){f[r]=q.locale[r]||c})}}var d='<div class="daterangepicker dropdown-menu"><div class="calendar left"></div><div class="calendar right"></div><div class="ranges"><div class="range_inputs"><div><label for="daterangepicker_start">'+this.locale.fromLabel+'</label><input class="m-wrap input-mini" type="text" name="daterangepicker_start" value="" disabled="disabled" /></div><div><label for="daterangepicker_end">'+this.locale.toLabel+'</label><input class="m-wrap input-mini" type="text" name="daterangepicker_end" value="" disabled="disabled" /></div><button class="btn " disabled="disabled">'+this.locale.applyLabel+"</button></div></div></div>";this.parentEl=(o&&q.parentEl&&b(q.parentEl))||b(this.parentEl);this.container=b(d).appendTo(this.parentEl);if(o){if(typeof q.format=="string"){this.format=q.format}if(typeof q.separator=="string"){this.separator=q.separator}if(typeof q.startDate=="string"){this.startDate=Date.parse(q.startDate,this.format)}if(typeof q.endDate=="string"){this.endDate=Date.parse(q.endDate,this.format)}if(typeof q.minDate=="string"){this.minDate=Date.parse(q.minDate,this.format)}if(typeof q.maxDate=="string"){this.maxDate=Date.parse(q.maxDate,this.format)}if(typeof q.startDate=="object"){this.startDate=q.startDate}if(typeof q.endDate=="object"){this.endDate=q.endDate}if(typeof q.minDate=="object"){this.minDate=q.minDate}if(typeof q.maxDate=="object"){this.maxDate=q.maxDate}if(typeof q.ranges=="object"){for(var l in q.ranges){var e=q.ranges[l][0];var i=q.ranges[l][1];if(typeof e=="string"){e=Date.parse(e)}if(typeof i=="string"){i=Date.parse(i)}if(this.minDate&&e<this.minDate){e=this.minDate}if(this.maxDate&&i>this.maxDate){i=this.maxDate}if((this.minDate&&i<this.minDate)||(this.maxDate&&e>this.maxDate)){continue}this.ranges[l]=[e,i]}var m="<ul>";for(var l in this.ranges){m+="<li>"+l+"</li>"}m+="<li>"+this.locale.customRangeLabel+"</li>";m+="</ul>";this.container.find(".ranges").prepend(m)}if(typeof q.locale=="object"){if(typeof q.locale.firstDay=="number"){this.locale.firstDay=q.locale.firstDay;var k=q.locale.firstDay;while(k>0){this.locale.daysOfWeek.push(this.locale.daysOfWeek.shift());k--}}}if(typeof q.opens=="string"){this.opens=q.opens}if(typeof q.showWeekNumbers=="boolean"){this.showWeekNumbers=q.showWeekNumbers}if(typeof q.buttonClasses=="string"){this.buttonClasses=[q.buttonClasses]}if(typeof q.buttonClasses=="object"){this.buttonClasses=q.buttonClasses}}var n=this.container;b.each(this.buttonClasses,function(c,r){n.find("button").addClass(r)});if(this.opens=="right"){var g=this.container.find(".calendar.left");var p=this.container.find(".calendar.right");g.removeClass("left").addClass("right");p.removeClass("right").addClass("left")}if(typeof q=="undefined"||typeof q.ranges=="undefined"){this.container.find(".calendar").show()}if(typeof h=="function"){this.cb=h}this.container.addClass("opens"+this.opens);this.container.on("mousedown",b.proxy(this.mousedown,this));this.container.find(".calendar").on("click",".prev",b.proxy(this.clickPrev,this));this.container.find(".calendar").on("click",".next",b.proxy(this.clickNext,this));this.container.find(".ranges").on("click","button",b.proxy(this.clickApply,this));this.container.find(".calendar").on("click","td.available",b.proxy(this.clickDate,this));this.container.find(".calendar").on("mouseenter","td.available",b.proxy(this.enterDate,this));this.container.find(".calendar").on("mouseleave","td.available",b.proxy(this.updateView,this));this.container.find(".ranges").on("click","li",b.proxy(this.clickRange,this));this.container.find(".ranges").on("mouseenter","li",b.proxy(this.enterRange,this));this.container.find(".ranges").on("mouseleave","li",b.proxy(this.updateView,this));this.element.on("keyup",b.proxy(this.updateFromControl,this));this.updateView();this.updateCalendars()};a.prototype={constructor:a,mousedown:function(c){c.stopPropagation();c.preventDefault()},updateView:function(){this.leftCalendar.month.set({month:this.startDate.getMonth(),year:this.startDate.getFullYear()});this.rightCalendar.month.set({month:this.endDate.getMonth(),year:this.endDate.getFullYear()});this.container.find("input[name=daterangepicker_start]").val(this.startDate.toString(this.format));this.container.find("input[name=daterangepicker_end]").val(this.endDate.toString(this.format));if(this.startDate.equals(this.endDate)||this.startDate.isBefore(this.endDate)){this.container.find("button").removeAttr("disabled")}else{this.container.find("button").attr("disabled","disabled")}},updateFromControl:function(){if(!this.element.is("input")){return}var d=this.element.val().split(this.separator);var e=Date.parseExact(d[0],this.format);var c=Date.parseExact(d[1],this.format);if(e==null||c==null){return}if(c.isBefore(e)){return}this.startDate=e;this.endDate=c;this.updateView();this.cb(this.startDate,this.endDate);this.updateCalendars()},notify:function(){this.updateView();if(this.element.is("input")){this.element.val(this.startDate.toString(this.format)+this.separator+this.endDate.toString(this.format))}this.cb(this.startDate,this.endDate)},move:function(){var c={top:this.parentEl.offset().top-this.parentEl.scrollTop(),left:this.parentEl.offset().left-this.parentEl.scrollLeft()};if(this.opens=="left"){this.container.css({top:this.element.offset().top+this.element.outerHeight(),right:b(window).width()-this.element.offset().left-this.element.outerWidth()-c.left,left:"auto"})}else{this.container.css({top:this.element.offset().top+this.element.outerHeight(),left:this.element.offset().left-c.left,right:"auto"})}},show:function(c){this.container.show();this.move();if(c){c.stopPropagation();c.preventDefault()}this.changed=false;b(document).on("mousedown",b.proxy(this.hide,this))},hide:function(c){this.container.hide();b(document).off("mousedown",this.hide);if(this.changed){this.changed=false;this.notify()}},enterRange:function(f){var c=f.target.innerHTML;if(c==this.locale.customRangeLabel){this.updateView()}else{var d=this.ranges[c];this.container.find("input[name=daterangepicker_start]").val(d[0].toString(this.format));this.container.find("input[name=daterangepicker_end]").val(d[1].toString(this.format))}},clickRange:function(f){var c=f.target.innerHTML;if(c==this.locale.customRangeLabel){this.container.find(".calendar").show()}else{var d=this.ranges[c];this.startDate=d[0];this.endDate=d[1];this.leftCalendar.month.set({month:this.startDate.getMonth(),year:this.startDate.getFullYear()});this.rightCalendar.month.set({month:this.endDate.getMonth(),year:this.endDate.getFullYear()});this.updateCalendars();this.changed=true;this.container.find(".calendar").hide();this.hide()}},clickPrev:function(d){var c=b(d.target).parents(".calendar");if(c.hasClass("left")){this.leftCalendar.month.add({months:-1})}else{this.rightCalendar.month.add({months:-1})}this.updateCalendars()},clickNext:function(d){var c=b(d.target).parents(".calendar");if(c.hasClass("left")){this.leftCalendar.month.add({months:1})}else{this.rightCalendar.month.add({months:1})}this.updateCalendars()},enterDate:function(f){var h=b(f.target).attr("title");var g=h.substr(1,1);var c=h.substr(3,1);var d=b(f.target).parents(".calendar");if(d.hasClass("left")){this.container.find("input[name=daterangepicker_start]").val(this.leftCalendar.calendar[g][c].toString(this.format))}else{this.container.find("input[name=daterangepicker_end]").val(this.rightCalendar.calendar[g][c].toString(this.format))}},clickDate:function(f){var h=b(f.target).attr("title");var g=h.substr(1,1);var c=h.substr(3,1);var d=b(f.target).parents(".calendar");if(d.hasClass("left")){startDate=this.leftCalendar.calendar[g][c];endDate=this.endDate}else{startDate=this.startDate;endDate=this.rightCalendar.calendar[g][c]}d.find("td").removeClass("active");if(startDate.equals(endDate)||startDate.isBefore(endDate)){b(f.target).addClass("active");if(!startDate.equals(this.startDate)||!endDate.equals(this.endDate)){this.changed=true}this.startDate=startDate;this.endDate=endDate}this.leftCalendar.month.set({month:this.startDate.getMonth(),year:this.startDate.getFullYear()});this.rightCalendar.month.set({month:this.endDate.getMonth(),year:this.endDate.getFullYear()});this.updateCalendars()},clickApply:function(c){this.hide()},updateCalendars:function(){this.leftCalendar.calendar=this.buildCalendar(this.leftCalendar.month.getMonth(),this.leftCalendar.month.getFullYear());this.rightCalendar.calendar=this.buildCalendar(this.rightCalendar.month.getMonth(),this.rightCalendar.month.getFullYear());this.container.find(".calendar.left").html(this.renderCalendar(this.leftCalendar.calendar,this.startDate,this.minDate,this.endDate));this.container.find(".calendar.right").html(this.renderCalendar(this.rightCalendar.calendar,this.endDate,this.startDate,this.maxDate))},buildCalendar:function(n,o){var c=Date.today().set({day:1,month:n,year:o});var l=c.clone().add(-1).day().getMonth();var k=c.clone().add(-1).day().getFullYear();var d=Date.getDaysInMonth(o,n);var p=Date.getDaysInMonth(k,l);var f=c.getDay();var j=Array();for(var h=0;h<6;h++){j[h]=Array()}var m=p-f+this.locale.firstDay+1;if(m>p){m-=7}if(f==this.locale.firstDay){m=p-6}var g=Date.today().set({day:m,month:l,year:k});for(var h=0,e=0,q=0;h<42;h++,e++,g=g.clone().add(1).day()){if(h>0&&e%7==0){e=0;q++}j[q][e]=g}return j},renderCalendar:function(g,f,e,c){var h='<table class="table-condensed">';h+="<thead>";h+="<tr>";if(this.showWeekNumbers){h+="<th></th>"}if(!e||e<g[1][1]){h+='<th class="prev available"><i class="fa fa-angle-left"></i></th>'}else{h+="<th></th>"}h+='<th colspan="5" style="width: auto">'+this.locale.monthNames[g[1][1].getMonth()]+g[1][1].toString(" yyyy")+"</th>";if(!c||c>g[1][1]){h+='<th class="next available"><i class="fa fa-angle-right"></i></th>'}else{h+="<th></th>"}h+="</tr>";h+="<tr>";if(this.showWeekNumbers){h+='<th class="week">'+this.locale.weekLabel+"</th>"}b.each(this.locale.daysOfWeek,function(m,l){h+="<th>"+l+"</th>"});h+="</tr>";h+="</thead>";h+="<tbody>";for(var k=0;k<6;k++){h+="<tr>";if(this.showWeekNumbers){h+='<td class="week">'+g[k][0].getWeek()+"</td>"}for(var d=0;d<7;d++){var i="available ";i+=(g[k][d].getMonth()==g[1][1].getMonth())?"":"off";f.setHours(0,0,0,0);if((e&&g[k][d]<e)||(c&&g[k][d]>c)){i="off disabled"}else{if(g[k][d].equals(f)){i+="active"}}var j="r"+k+"c"+d;h+='<td class="'+i+'" title="'+j+'">'+g[k][d].getDate()+"</td>"}h+="</tr>"}h+="</tbody>";h+="</table>";return h}};b.fn.daterangepicker=function(d,c){this.each(function(){var e=b(this);if(!e.data("daterangepicker")){e.data("daterangepicker",new a(e,d,c))}});return this}}(window.jQuery);