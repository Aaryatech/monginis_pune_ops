!function(j,i){var p={"font-styles":function(e,d){var f=d&&d.size?" btn-"+d.size:"";return"<li class='dropdown'><a class='btn btn-default btn"+f+" dropdown-toggle' data-toggle='dropdown' href='#'><i class='glyphicon glyphicon-font'></i>&nbsp;<span class='current-font'>"+e.font_styles.normal+"</span>&nbsp;<b class='caret'></b></a><ul class='dropdown-menu'><li><a data-wysihtml5-command='formatBlock' data-wysihtml5-command-value='div' tabindex='-1'>"+e.font_styles.normal+"</a></li><li><a data-wysihtml5-command='formatBlock' data-wysihtml5-command-value='h1' tabindex='-1'>"+e.font_styles.h1+"</a></li><li><a data-wysihtml5-command='formatBlock' data-wysihtml5-command-value='h2' tabindex='-1'>"+e.font_styles.h2+"</a></li><li><a data-wysihtml5-command='formatBlock' data-wysihtml5-command-value='h3' tabindex='-1'>"+e.font_styles.h3+"</a></li><li><a data-wysihtml5-command='formatBlock' data-wysihtml5-command-value='h4'>"+e.font_styles.h4+"</a></li><li><a data-wysihtml5-command='formatBlock' data-wysihtml5-command-value='h5'>"+e.font_styles.h5+"</a></li><li><a data-wysihtml5-command='formatBlock' data-wysihtml5-command-value='h6'>"+e.font_styles.h6+"</a></li></ul></li>"},emphasis:function(e,d){var f=d&&d.size?" btn-"+d.size:"";return"<li><div class='btn-group'><a class='btn btn-default btn"+f+"' data-wysihtml5-command='bold' title='CTRL+B' tabindex='-1'>"+e.emphasis.bold+"</a><a class='btn btn-default btn"+f+"' data-wysihtml5-command='italic' title='CTRL+I' tabindex='-1'>"+e.emphasis.italic+"</a><a class='btn btn-default btn"+f+"' data-wysihtml5-command='underline' title='CTRL+U' tabindex='-1'>"+e.emphasis.underline+"</a></div></li>"},lists:function(e,d){var f=d&&d.size?" btn-"+d.size:"";return"<li><div class='btn-group'><a class='btn btn-default btn"+f+"' data-wysihtml5-command='insertUnorderedList' title='"+e.lists.unordered+"' tabindex='-1'><i class='glyphicon glyphicon-list'></i></a><a class='btn btn-default btn"+f+"' data-wysihtml5-command='insertOrderedList' title='"+e.lists.ordered+"' tabindex='-1'><i class='glyphicon glyphicon-th-list'></i></a><a class='btn btn-default btn"+f+"' data-wysihtml5-command='Outdent' title='"+e.lists.outdent+"' tabindex='-1'><i class='glyphicon glyphicon-indent-right'></i></a><a class='btn btn-default btn"+f+"' data-wysihtml5-command='Indent' title='"+e.lists.indent+"' tabindex='-1'><i class='glyphicon glyphicon-indent-left'></i></a></div></li>"},link:function(e,d){var f=d&&d.size?" btn-"+d.size:"";return"<li><div class='bootstrap-wysihtml5-insert-link-modal modal fade'><div class='modal-dialog'><div class='modal-content'><div class='modal-header'><a class='close' data-dismiss='modal'>&times;</a><h3 class='modal-title'>"+e.link.insert+"</h3></div><div class='modal-body'><input value='http://' class='bootstrap-wysihtml5-insert-link-url form-control'><label class='checkbox'> <input type='checkbox' class='bootstrap-wysihtml5-insert-link-target' checked>"+e.link.target+"</label></div><div class='modal-footer'><a href='#' class='btn btn-default' data-dismiss='modal'>"+e.link.cancel+"</a><a href='#' class='btn btn-primary' data-dismiss='modal'>"+e.link.insert+"</a></div></div></div></div><a class='btn btn-default"+f+"' data-wysihtml5-command='createLink' title='"+e.link.insert+"' tabindex='-1'><i class='glyphicon glyphicon-share'></i></a></li>"},image:function(e,d){var f=d&&d.size?" btn-"+d.size:"";return"<li><div class='bootstrap-wysihtml5-insert-image-modal modal fade'><div class='modal-dialog'><div class='modal-content'><div class='modal-header'><a class='close' data-dismiss='modal'>&times;</a><h3 class='modal-title'>"+e.image.insert+"</h3></div><div class='modal-body'><input value='http://' class='bootstrap-wysihtml5-insert-image-url form-control'></div><div class='modal-footer'><a href='#' class='btn btn-default' data-dismiss='modal'>"+e.image.cancel+"</a><a href='#' class='btn btn-primary' data-dismiss='modal'>"+e.image.insert+"</a></div></div></div></div><a class='btn btn-default btn"+f+"' data-wysihtml5-command='insertImage' title='"+e.image.insert+"' tabindex='-1'><i class='glyphicon glyphicon-picture'></i></a></li>"},html:function(e,d){var f=d&&d.size?" btn-"+d.size:"";return"<li><div class='btn-group'><a class='btn btn-default btn"+f+"' data-wysihtml5-action='change_view' title='"+e.html.edit+"' tabindex='-1'><i class='glyphicon glyphicon-pencil'></i></a></div></li>"},color:function(e,d){var f=d&&d.size?" btn-"+d.size:"";return"<li class='dropdown'><a class='btn btn-default dropdown-toggle"+f+"' data-toggle='dropdown' href='#' tabindex='-1'><span class='current-color'>"+e.colours.black+"</span>&nbsp;<b class='caret'></b></a><ul class='dropdown-menu'><li><div class='wysihtml5-colors' data-wysihtml5-command-value='black'></div><a class='wysihtml5-colors-title' data-wysihtml5-command='foreColor' data-wysihtml5-command-value='black'>"+e.colours.black+"</a></li><li><div class='wysihtml5-colors' data-wysihtml5-command-value='silver'></div><a class='wysihtml5-colors-title' data-wysihtml5-command='foreColor' data-wysihtml5-command-value='silver'>"+e.colours.silver+"</a></li><li><div class='wysihtml5-colors' data-wysihtml5-command-value='gray'></div><a class='wysihtml5-colors-title' data-wysihtml5-command='foreColor' data-wysihtml5-command-value='gray'>"+e.colours.gray+"</a></li><li><div class='wysihtml5-colors' data-wysihtml5-command-value='maroon'></div><a class='wysihtml5-colors-title' data-wysihtml5-command='foreColor' data-wysihtml5-command-value='maroon'>"+e.colours.maroon+"</a></li><li><div class='wysihtml5-colors' data-wysihtml5-command-value='red'></div><a class='wysihtml5-colors-title' data-wysihtml5-command='foreColor' data-wysihtml5-command-value='red'>"+e.colours.red+"</a></li><li><div class='wysihtml5-colors' data-wysihtml5-command-value='purple'></div><a class='wysihtml5-colors-title' data-wysihtml5-command='foreColor' data-wysihtml5-command-value='purple'>"+e.colours.purple+"</a></li><li><div class='wysihtml5-colors' data-wysihtml5-command-value='green'></div><a class='wysihtml5-colors-title' data-wysihtml5-command='foreColor' data-wysihtml5-command-value='green'>"+e.colours.green+"</a></li><li><div class='wysihtml5-colors' data-wysihtml5-command-value='olive'></div><a class='wysihtml5-colors-title' data-wysihtml5-command='foreColor' data-wysihtml5-command-value='olive'>"+e.colours.olive+"</a></li><li><div class='wysihtml5-colors' data-wysihtml5-command-value='navy'></div><a class='wysihtml5-colors-title' data-wysihtml5-command='foreColor' data-wysihtml5-command-value='navy'>"+e.colours.navy+"</a></li><li><div class='wysihtml5-colors' data-wysihtml5-command-value='blue'></div><a class='wysihtml5-colors-title' data-wysihtml5-command='foreColor' data-wysihtml5-command-value='blue'>"+e.colours.blue+"</a></li><li><div class='wysihtml5-colors' data-wysihtml5-command-value='orange'></div><a class='wysihtml5-colors-title' data-wysihtml5-command='foreColor' data-wysihtml5-command-value='orange'>"+e.colours.orange+"</a></li></ul></li>"}},o=function(e,c,f){return p[e](c,f)},n=function(a,h){this.el=a;var g=h||l;for(var c in g.customTemplates){p[c]=g.customTemplates[c]}this.toolbar=this.createToolbar(a,g),this.editor=this.createEditor(h),window.editor=this.editor,j("iframe.wysihtml5-sandbox").each(function(d,e){j(e.contentWindow).off("focus.wysihtml5").on({"focus.wysihtml5":function(){j("li.dropdown").removeClass("open")}})})};n.prototype={constructor:n,createEditor:function(f){f=f||{},f=j.extend(!0,{},f),f.toolbar=this.toolbar[0];var b=new i.Editor(this.el[0],f);if(f&&f.events){for(var a in f.events){b.on(a,f.events[a])}}return b},createToolbar:function(a,s){var r=this,q=j("<ul/>",{"class":"wysihtml5-toolbar",style:"display:none"}),h=s.locale||l.locale||"en";for(var g in l){var d=!1;s[g]!==undefined?s[g]===!0&&(d=!0):d=l[g],d===!0&&(q.append(o(g,k[h],s)),g==="html"&&this.initHtml(q),g==="link"&&this.initInsertLink(q),g==="image"&&this.initInsertImage(q))}if(s.toolbar){for(g in s.toolbar){q.append(s.toolbar[g])}}return q.find("a[data-wysihtml5-command='formatBlock']").click(function(e){var t=e.target||e.srcElement,f=j(t);r.toolbar.find(".current-font").text(f.html())}),q.find("a[data-wysihtml5-command='foreColor']").click(function(e){var t=e.target||e.srcElement,f=j(t);r.toolbar.find(".current-color").text(f.html())}),this.el.before(q),q},initHtml:function(d){var c="a[data-wysihtml5-action='change_view']";d.find(c).click(function(a){d.find("a.btn").not(c).toggleClass("disabled")})},initInsertImage:function(a){var w=this,v=a.find(".bootstrap-wysihtml5-insert-image-modal"),u=v.find(".bootstrap-wysihtml5-insert-image-url"),t=v.find("a.btn-primary"),s=u.val(),r,q=function(){var b=u.val();u.val(s),w.editor.currentView.element.focus(),r&&(w.editor.composer.selection.setBookmark(r),r=null),w.editor.composer.commands.exec("insertImage",b)};u.keypress(function(b){b.which==13&&(q(),v.modal("hide"))}),t.click(q),v.on("shown",function(){u.focus()}),v.on("hide",function(){w.editor.currentView.element.focus()}),a.find("a[data-wysihtml5-command=insertImage]").click(function(){var c=j(this).hasClass("wysihtml5-command-active");return c?!0:(w.editor.currentView.element.focus(!1),r=w.editor.composer.selection.getBookmark(),v.appendTo("body").modal("show"),v.on("click.dismiss.modal",'[data-dismiss="modal"]',function(b){b.stopPropagation()}),!1)})},initInsertLink:function(y){var x=this,w=y.find(".bootstrap-wysihtml5-insert-link-modal"),v=w.find(".bootstrap-wysihtml5-insert-link-url"),u=w.find(".bootstrap-wysihtml5-insert-link-target"),t=w.find("a.btn-primary"),s=v.val(),r,q=function(){var d=v.val();v.val(s),x.editor.currentView.element.focus(),r&&(x.editor.composer.selection.setBookmark(r),r=null);var c=u.prop("checked");x.editor.composer.commands.exec("createLink",{href:d,target:c?"_blank":"_self",rel:c?"nofollow":""})},a=!1;v.keypress(function(b){b.which==13&&(q(),w.modal("hide"))}),t.click(q),w.on("shown",function(){v.focus()}),w.on("hide",function(){x.editor.currentView.element.focus()}),y.find("a[data-wysihtml5-command=createLink]").click(function(){var c=j(this).hasClass("wysihtml5-command-active");return c?!0:(x.editor.currentView.element.focus(!1),r=x.editor.composer.selection.getBookmark(),w.appendTo("body").modal("show"),w.on("click.dismiss.modal",'[data-dismiss="modal"]',function(b){b.stopPropagation()}),!1)})}};var m={resetDefaults:function(){j.fn.wysihtml5.defaultOptions=j.extend(!0,{},j.fn.wysihtml5.defaultOptionsCache)},bypassDefaults:function(a){return this.each(function(){var b=j(this);b.data("wysihtml5",new n(b,a))})},shallowExtend:function(a){var f=j.extend({},j.fn.wysihtml5.defaultOptions,a||{},j(this).data()),e=this;return m.bypassDefaults.apply(e,[f])},deepExtend:function(a){var f=j.extend(!0,{},j.fn.wysihtml5.defaultOptions,a||{}),e=this;return m.bypassDefaults.apply(e,[f])},init:function(d){var c=this;return m.shallowExtend.apply(c,[d])}};j.fn.wysihtml5=function(a){if(m[a]){return m[a].apply(this,Array.prototype.slice.call(arguments,1))}if(typeof a=="object"||!a){return m.init.apply(this,arguments)}j.error("Method "+a+" does not exist on jQuery.wysihtml5")},j.fn.wysihtml5.Constructor=n;var l=j.fn.wysihtml5.defaultOptions={"font-styles":!0,color:!1,emphasis:!0,lists:!0,html:!1,link:!0,image:!0,events:{},parserRules:{classes:{"wysiwyg-color-silver":1,"wysiwyg-color-gray":1,"wysiwyg-color-white":1,"wysiwyg-color-maroon":1,"wysiwyg-color-red":1,"wysiwyg-color-purple":1,"wysiwyg-color-fuchsia":1,"wysiwyg-color-green":1,"wysiwyg-color-lime":1,"wysiwyg-color-olive":1,"wysiwyg-color-yellow":1,"wysiwyg-color-navy":1,"wysiwyg-color-blue":1,"wysiwyg-color-teal":1,"wysiwyg-color-aqua":1,"wysiwyg-color-orange":1},tags:{b:{},i:{},br:{},ol:{},ul:{},li:{},h1:{},h2:{},h3:{},h4:{},h5:{},h6:{},blockquote:{},u:1,img:{check_attributes:{width:"numbers",alt:"alt",src:"url",height:"numbers"}},a:{check_attributes:{href:"url",target:"alt",rel:"alt"}},span:1,div:1,code:1,pre:1}},stylesheets:["./lib/css/wysiwyg-color.css"],locale:"en"};typeof j.fn.wysihtml5.defaultOptionsCache=="undefined"&&(j.fn.wysihtml5.defaultOptionsCache=j.extend(!0,{},j.fn.wysihtml5.defaultOptions));var k=j.fn.wysihtml5.locale={en:{font_styles:{normal:"Normal text",h1:"Heading 1",h2:"Heading 2",h3:"Heading 3",h4:"Heading 4",h5:"Heading 5",h6:"Heading 6"},emphasis:{bold:"Bold",italic:"Italic",underline:"Underline"},lists:{unordered:"Unordered list",ordered:"Ordered list",outdent:"Outdent",indent:"Indent"},link:{insert:"Insert link",cancel:"Cancel",target:"Open link in new window"},image:{insert:"Insert image",cancel:"Cancel"},html:{edit:"Edit HTML"},colours:{black:"Black",silver:"Silver",gray:"Grey",maroon:"Maroon",red:"Red",purple:"Purple",green:"Green",olive:"Olive",navy:"Navy",blue:"Blue",orange:"Orange"}}}}(window.jQuery,window.wysihtml5);