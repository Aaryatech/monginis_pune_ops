!function(c,b,d,a){b=void 0!==b&&b.Math==Math?b:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")(),c.fn.dropdown=function(j){var p,g=c(this),w=c(d),e=g.selector||"",h="ontouchstart" in d.documentElement,n=(new Date).getTime(),t=[],m=arguments[0],q="string"==typeof m,k=[].slice.call(arguments,1);return g.each(function(aw){var az,aA,av,aB,at,ar,al,u,aq=c.isPlainObject(j)?c.extend(!0,{},c.fn.dropdown.settings,j):c.extend({},c.fn.dropdown.settings),an=aq.className,s=aq.message,ax=aq.fields,ad=aq.keys,af=aq.metadata,ak=aq.namespace,au=aq.regExp,v=aq.selector,aa=aq.error,o=aq.templates,aj="."+ak,ai="module-"+ak,ac=c(this),ap=c(aq.context),Z=ac.find(v.text),ag=ac.find(v.search),ay=ac.find(v.sizer),ab=ac.find(v.input),r=ac.find(v.icon),ae=ac.prev().find(v.text).length>0?ac.prev().find(v.text):ac.prev(),l=ac.children(v.menu),am=l.find(v.item),ao=!1,J=!1,i=!1,f=this,ah=ac.data(ai);u={initialize:function(){u.debug("Initializing dropdown",aq),u.is.alreadySetup()?u.setup.reference():(u.setup.layout(),aq.values&&u.change.values(aq.values),u.refreshData(),u.save.defaults(),u.restore.selected(),u.create.id(),u.bind.events(),u.observeChanges(),u.instantiate())},instantiate:function(){u.verbose("Storing instance of dropdown",u),ah=u,ac.data(ai,u)},destroy:function(){u.verbose("Destroying previous dropdown",ac),u.remove.tabbable(),ac.off(aj).removeData(ai),l.off(aj),w.off(aB),u.disconnect.menuObserver(),u.disconnect.selectObserver()},observeChanges:function(){"MutationObserver" in b&&(ar=new MutationObserver(u.event.select.mutation),al=new MutationObserver(u.event.menu.mutation),u.debug("Setting up mutation observer",ar,al),u.observe.select(),u.observe.menu())},disconnect:{menuObserver:function(){al&&al.disconnect()},selectObserver:function(){ar&&ar.disconnect()}},observe:{select:function(){u.has.input()&&ar.observe(ac[0],{childList:!0,subtree:!0})},menu:function(){u.has.menu()&&al.observe(l[0],{childList:!0,subtree:!0})}},create:{id:function(){at=(Math.random().toString(16)+"000000000").substr(2,8),aB="."+at,u.verbose("Creating unique id for element",at)},userChoice:function(z){var A,y,x;return !!(z=z||u.get.userValues())&&(z=c.isArray(z)?z:[z],c.each(z,function(B,C){!1===u.get.item(C)&&(x=aq.templates.addition(u.add.variables(s.addResult,C)),y=c("<div />").html(x).attr("data-"+af.value,C).attr("data-"+af.text,C).addClass(an.addition).addClass(an.item),aq.hideAdditions&&y.addClass(an.hidden),A=void 0===A?y:A.add(y),u.verbose("Creating user choices for value",C,y))}),A)},userLabels:function(x){var y=u.get.userValues();y&&(u.debug("Adding user labels",y),c.each(y,function(A,z){u.verbose("Adding custom user value"),u.add.label(z,z)}))},menu:function(){l=c("<div />").addClass(an.menu).appendTo(ac)},sizer:function(){ay=c("<span />").addClass(an.sizer).insertAfter(ag)}},search:function(x){x=void 0!==x?x:u.get.query(),u.verbose("Searching for query",x),u.has.minCharacters(x)?u.filter(x):u.hide()},select:{firstUnfiltered:function(){u.verbose("Selecting first non-filtered element"),u.remove.selectedItem(),am.not(v.unselectable).not(v.addition+v.hidden).eq(0).addClass(an.selected)},nextAvailable:function(y){y=y.eq(0);var x=y.nextAll(v.item).not(v.unselectable).eq(0),z=y.prevAll(v.item).not(v.unselectable).eq(0);x.length>0?(u.verbose("Moving selection to",x),x.addClass(an.selected)):(u.verbose("Moving selection to",z),z.addClass(an.selected))}},setup:{api:function(){var x={debug:aq.debug,urlData:{value:u.get.value(),query:u.get.query()},on:!1};u.verbose("First request, initializing API"),ac.api(x)},layout:function(){ac.is("select")&&(u.setup.select(),u.setup.returnedObject()),u.has.menu()||u.create.menu(),u.is.search()&&!u.has.search()&&(u.verbose("Adding search input"),ag=c("<input />").addClass(an.search).prop("autocomplete","off").insertBefore(Z)),u.is.multiple()&&u.is.searchSelection()&&!u.has.sizer()&&u.create.sizer(),aq.allowTab&&u.set.tabbable()},select:function(){var x=u.get.selectValues();u.debug("Dropdown initialized on a select",x),ac.is("select")&&(ab=ac),ab.parent(v.dropdown).length>0?(u.debug("UI dropdown already exists. Creating dropdown menu only"),ac=ab.closest(v.dropdown),u.has.menu()||u.create.menu(),l=ac.children(v.menu),u.setup.menu(x)):(u.debug("Creating entire dropdown from select"),ac=c("<div />").attr("class",ab.attr("class")).addClass(an.selection).addClass(an.dropdown).html(o.dropdown(x)).insertBefore(ab),ab.hasClass(an.multiple)&&!1===ab.prop("multiple")&&(u.error(aa.missingMultiple),ab.prop("multiple",!0)),ab.is("[multiple]")&&u.set.multiple(),ab.prop("disabled")&&(u.debug("Disabling dropdown"),ac.addClass(an.disabled)),ab.removeAttr("class").detach().prependTo(ac)),u.refresh()},menu:function(x){l.html(o.menu(x,ax)),am=l.find(v.item)},reference:function(){u.debug("Dropdown behavior was called on select, replacing with closest dropdown"),ac=ac.parent(v.dropdown),ah=ac.data(ai),f=ac.get(0),u.refresh(),u.setup.returnedObject()},returnedObject:function(){var y=g.slice(0,aw),x=g.slice(aw+1);g=y.add(ac).add(x)}},refresh:function(){u.refreshSelectors(),u.refreshData()},refreshItems:function(){am=l.find(v.item)},refreshSelectors:function(){u.verbose("Refreshing selector cache"),Z=ac.find(v.text),ag=ac.find(v.search),ab=ac.find(v.input),r=ac.find(v.icon),ae=ac.prev().find(v.text).length>0?ac.prev().find(v.text):ac.prev(),l=ac.children(v.menu),am=l.find(v.item)},refreshData:function(){u.verbose("Refreshing cached metadata"),am.removeData(af.text).removeData(af.value)},clearData:function(){u.verbose("Clearing metadata"),am.removeData(af.text).removeData(af.value),ac.removeData(af.defaultText).removeData(af.defaultValue).removeData(af.placeholderText)},toggle:function(){u.verbose("Toggling menu visibility"),u.is.active()?u.hide():u.show()},show:function(x){if(x=c.isFunction(x)?x:function(){},!u.can.show()&&u.is.remote()&&(u.debug("No API results retrieved, searching before show"),u.queryRemote(u.get.query(),u.show)),u.can.show()&&!u.is.active()){if(u.debug("Showing dropdown"),!u.has.message()||u.has.maxSelections()||u.has.allResultsFiltered()||u.remove.message(),u.is.allFiltered()){return !0}!1!==aq.onShow.call(f)&&u.animate.show(function(){u.can.click()&&u.bind.intent(),u.has.menuSearch()&&u.focusSearch(),u.set.visible(),x.call(f)})}},hide:function(x){x=c.isFunction(x)?x:function(){},u.is.active()&&(u.debug("Hiding dropdown"),!1!==aq.onHide.call(f)&&u.animate.hide(function(){u.remove.visible(),x.call(f)}))},hideOthers:function(){u.verbose("Finding other dropdowns to hide"),g.not(ac).has(v.menu+"."+an.visible).dropdown("hide")},hideMenu:function(){u.verbose("Hiding menu  instantaneously"),u.remove.active(),u.remove.visible(),l.transition("hide")},hideSubMenus:function(){var x=l.children(v.item).find(v.menu);u.verbose("Hiding sub menus",x),x.transition("hide")},bind:{events:function(){h&&u.bind.touchEvents(),u.bind.keyboardEvents(),u.bind.inputEvents(),u.bind.mouseEvents()},touchEvents:function(){u.debug("Touch device detected binding additional touch events"),u.is.searchSelection()||u.is.single()&&ac.on("touchstart"+aj,u.event.test.toggle),l.on("touchstart"+aj,v.item,u.event.item.mouseenter)},keyboardEvents:function(){u.verbose("Binding keyboard events"),ac.on("keydown"+aj,u.event.keydown),u.has.search()&&ac.on(u.get.inputEvent()+aj,v.search,u.event.input),u.is.multiple()&&w.on("keydown"+aB,u.event.document.keydown)},inputEvents:function(){u.verbose("Binding input change events"),ac.on("change"+aj,v.input,u.event.change)},mouseEvents:function(){u.verbose("Binding mouse events"),u.is.multiple()&&ac.on("click"+aj,v.label,u.event.label.click).on("click"+aj,v.remove,u.event.remove.click),u.is.searchSelection()?(ac.on("mousedown"+aj,u.event.mousedown).on("mouseup"+aj,u.event.mouseup).on("mousedown"+aj,v.menu,u.event.menu.mousedown).on("mouseup"+aj,v.menu,u.event.menu.mouseup).on("click"+aj,v.icon,u.event.icon.click).on("focus"+aj,v.search,u.event.search.focus).on("click"+aj,v.search,u.event.search.focus).on("blur"+aj,v.search,u.event.search.blur).on("click"+aj,v.text,u.event.text.focus),u.is.multiple()&&ac.on("click"+aj,u.event.click)):("click"==aq.on?ac.on("click"+aj,v.icon,u.event.icon.click).on("click"+aj,u.event.test.toggle):"hover"==aq.on?ac.on("mouseenter"+aj,u.delay.show).on("mouseleave"+aj,u.delay.hide):ac.on(aq.on+aj,u.toggle),ac.on("mousedown"+aj,u.event.mousedown).on("mouseup"+aj,u.event.mouseup).on("focus"+aj,u.event.focus),u.has.menuSearch()?ac.on("blur"+aj,v.search,u.event.search.blur):ac.on("blur"+aj,u.event.blur)),l.on("mouseenter"+aj,v.item,u.event.item.mouseenter).on("mouseleave"+aj,v.item,u.event.item.mouseleave).on("click"+aj,v.item,u.event.item.click)},intent:function(){u.verbose("Binding hide intent event to document"),h&&w.on("touchstart"+aB,u.event.test.touch).on("touchmove"+aB,u.event.test.touch),w.on("click"+aB,u.event.test.hide)}},unbind:{intent:function(){u.verbose("Removing hide intent event from document"),h&&w.off("touchstart"+aB).off("touchmove"+aB),w.off("click"+aB)}},filter:function(y){var x=void 0!==y?y:u.get.query(),z=function(){u.is.multiple()&&u.filterActive(),(y||!y&&0==u.get.activeItem().length)&&u.select.firstUnfiltered(),u.has.allResultsFiltered()?aq.onNoResults.call(f,x)?aq.allowAdditions?aq.hideAdditions&&(u.verbose("User addition with no menu, setting empty style"),u.set.empty(),u.hideMenu()):(u.verbose("All items filtered, showing message",x),u.add.message(s.noResults)):(u.verbose("All items filtered, hiding dropdown",x),u.hideMenu()):(u.remove.empty(),u.remove.message()),aq.allowAdditions&&u.add.userSuggestion(y),u.is.searchSelection()&&u.can.show()&&u.is.focusedOnSearch()&&u.show()};aq.useLabels&&u.has.maxSelections()||(aq.apiSettings?u.can.useAPI()?u.queryRemote(x,function(){aq.filterRemoteData&&u.filterItems(x),z()}):u.error(aa.noAPI):(u.filterItems(x),z()))},queryRemote:function(y,z){var x={errorDuration:!1,cache:"local",throttle:aq.throttle,urlData:{query:y},onError:function(){u.add.message(s.serverError),z()},onFailure:function(){u.add.message(s.serverError),z()},onSuccess:function(A){u.remove.message(),u.setup.menu({values:A[ax.remoteValues]}),z()}};ac.api("get request")||u.setup.api(),x=c.extend(!0,{},x,aq.apiSettings),ac.api("setting",x).api("query")},filterItems:function(z){var B=void 0!==z?z:u.get.query(),y=null,x=u.escape.string(B),A=new RegExp("^"+x,"igm");u.has.query()&&(y=[],u.verbose("Searching for matching values",B),am.each(function(){var D,C,E=c(this);if("both"==aq.match||"text"==aq.match){if(D=String(u.get.choiceText(E,!1)),-1!==D.search(A)){return y.push(this),!0}if("exact"===aq.fullTextSearch&&u.exactSearch(B,D)){return y.push(this),!0}if(!0===aq.fullTextSearch&&u.fuzzySearch(B,D)){return y.push(this),!0}}if("both"==aq.match||"value"==aq.match){if(C=String(u.get.choiceValue(E,D)),-1!==C.search(A)){return y.push(this),!0}if("exact"===aq.fullTextSearch&&u.exactSearch(B,C)){return y.push(this),!0}if(!0===aq.fullTextSearch&&u.fuzzySearch(B,C)){return y.push(this),!0}}})),u.debug("Showing only matched items",B),u.remove.filteredItem(),y&&am.not(y).addClass(an.filtered)},fuzzySearch:function(B,z){var D=z.length,y=B.length;if(B=B.toLowerCase(),z=z.toLowerCase(),y>D){return !1}if(y===D){return B===z}B:for(var x=0,C=0;x<y;x++){for(var A=B.charCodeAt(x);C<D;){if(z.charCodeAt(C++)===A){continue B}}return !1}return !0},exactSearch:function(y,x){return y=y.toLowerCase(),x=x.toLowerCase(),x.indexOf(y)>-1},filterActive:function(){aq.useLabels&&am.filter("."+an.active).addClass(an.filtered)},focusSearch:function(x){u.has.search()&&!u.is.focusedOnSearch()&&(x?(ac.off("focus"+aj,v.search),ag.focus(),ac.on("focus"+aj,v.search,u.event.search.focus)):ag.focus())},forceSelection:function(){var y=am.not(an.filtered).filter("."+an.selected).eq(0),x=am.not(an.filtered).filter("."+an.active).eq(0),z=y.length>0?y:x;if(z.length>0&&!u.is.multiple()){return u.debug("Forcing partial selection to selected item",z),void u.event.item.click.call(z,{},!0)}aq.allowAdditions?(u.set.selected(u.get.query()),u.remove.searchTerm()):u.remove.searchTerm()},change:{values:function(x){aq.allowAdditions||u.clear(),u.debug("Creating dropdown with specified values",x),u.setup.menu({values:x}),c.each(x,function(z,y){if(1==y.selected){return u.debug("Setting initial selection to",y.value),u.set.selected(y.value),!0}})}},event:{change:function(){i||(u.debug("Input changed, updating selection"),u.set.selected())},focus:function(){aq.showOnFocus&&!ao&&u.is.hidden()&&!aA&&u.show()},blur:function(x){aA=d.activeElement===this,ao||aA||(u.remove.activeLabel(),u.hide())},mousedown:function(){u.is.searchSelection()?av=!0:ao=!0},mouseup:function(){u.is.searchSelection()?av=!1:ao=!1},click:function(x){c(x.target).is(ac)&&(u.is.focusedOnSearch()?u.show():u.focusSearch())},search:{focus:function(){ao=!0,u.is.multiple()&&u.remove.activeLabel(),aq.showOnFocus&&u.search()},blur:function(x){aA=d.activeElement===this,u.is.searchSelection()&&!av&&(J||aA||(aq.forceSelection&&u.forceSelection(),u.hide())),av=!1}},icon:{click:function(x){u.toggle()}},text:{focus:function(x){ao=!0,u.focusSearch()}},input:function(x){(u.is.multiple()||u.is.searchSelection())&&u.set.filtered(),clearTimeout(u.timer),u.timer=setTimeout(u.search,aq.delay.search)},label:{click:function(z){var D=c(this),y=ac.find(v.label),x=y.filter("."+an.active),C=D.nextAll("."+an.active),A=D.prevAll("."+an.active),B=C.length>0?D.nextUntil(C).add(x).add(D):D.prevUntil(A).add(x).add(D);z.shiftKey?(x.removeClass(an.active),B.addClass(an.active)):z.ctrlKey?D.toggleClass(an.active):(x.removeClass(an.active),D.addClass(an.active)),aq.onLabelSelect.apply(this,y.filter("."+an.active))}},remove:{click:function(){var x=c(this).parent();x.hasClass(an.active)?u.remove.activeLabels():u.remove.activeLabels(x)}},test:{toggle:function(y){var x=u.is.multiple()?u.show:u.toggle;u.is.bubbledLabelClick(y)||u.is.bubbledIconClick(y)||u.determine.eventOnElement(y,x)&&y.preventDefault()},touch:function(x){u.determine.eventOnElement(x,function(){"touchstart"==x.type?u.timer=setTimeout(function(){u.hide()},aq.delay.touch):"touchmove"==x.type&&clearTimeout(u.timer)}),x.stopPropagation()},hide:function(x){u.determine.eventInModule(x,u.hide)}},select:{mutation:function(x){u.debug("<select> modified, recreating menu");var y=!1;c.each(x,function(A,z){if(c(z.target).is("select")||c(z.addedNodes).is("select")){return y=!0,!0}}),y&&(u.disconnect.selectObserver(),u.refresh(),u.setup.select(),u.set.selected(),u.observe.select())}},menu:{mutation:function(z){var D=z[0],y=c(D.addedNodes?D.addedNodes[0]:!1),x=c(D.removedNodes?D.removedNodes[0]:!1),C=y.add(x),A=C.is(v.addition)||C.closest(v.addition).length>0,B=C.is(v.message)||C.closest(v.message).length>0;A||B?(u.debug("Updating item selector cache"),u.refreshItems()):(u.debug("Menu modified, updating selector cache"),u.refresh())},mousedown:function(){J=!0},mouseup:function(){J=!1}},item:{mouseenter:function(z){var C=c(z.target),y=c(this),x=y.children(v.menu),B=y.siblings(v.item).children(v.menu),A=x.length>0;!(x.find(C).length>0)&&A&&(clearTimeout(u.itemTimer),u.itemTimer=setTimeout(function(){u.verbose("Showing sub-menu",x),c.each(B,function(){u.animate.hide(!1,c(this))}),u.animate.show(!1,x)},aq.delay.show),z.preventDefault())},mouseleave:function(x){var y=c(this).children(v.menu);y.length>0&&(clearTimeout(u.itemTimer),u.itemTimer=setTimeout(function(){u.verbose("Hiding sub-menu",y),u.animate.hide(!1,y)},aq.delay.hide))},click:function(E,A){var C=c(this),y=c(E?E.target:""),F=C.find(v.menu),x=u.get.choiceText(C),z=u.get.choiceValue(C,x),B=F.length>0,D=F.find(y).length>0;u.has.menuSearch()&&c(d.activeElement).blur(),D||B&&!aq.allowCategorySelection||(u.is.searchSelection()&&(aq.allowAdditions&&u.remove.userAddition(),u.remove.searchTerm(),u.is.focusedOnSearch()||1==A||u.focusSearch(!0)),aq.useLabels||(u.remove.filteredItem(),u.set.scrollPosition(C)),u.determine.selectAction.call(this,x,z))}},document:{keydown:function(D){var K=D.which;if(u.is.inObject(K,ad)){var z=ac.find(v.label),B=z.filter("."+an.active),G=(B.data(af.value),z.index(B)),y=z.length,L=B.length>0,x=B.length>1,A=0===G,F=G+1==y,I=u.is.searchSelection(),E=u.is.focusedOnSearch(),H=u.is.focused(),C=E&&0===u.get.caretPosition();if(I&&!L&&!E){return}K==ad.leftArrow?!H&&!C||L?L&&(D.shiftKey?u.verbose("Adding previous label to selection"):(u.verbose("Selecting previous label"),z.removeClass(an.active)),A&&!x?B.addClass(an.active):B.prev(v.siblingLabel).addClass(an.active).end(),D.preventDefault()):(u.verbose("Selecting previous label"),z.last().addClass(an.active)):K==ad.rightArrow?(H&&!L&&z.first().addClass(an.active),L&&(D.shiftKey?u.verbose("Adding next label to selection"):(u.verbose("Selecting next label"),z.removeClass(an.active)),F?I?E?z.removeClass(an.active):u.focusSearch():x?B.next(v.siblingLabel).addClass(an.active):B.addClass(an.active):B.next(v.siblingLabel).addClass(an.active),D.preventDefault())):K==ad.deleteKey||K==ad.backspace?L?(u.verbose("Removing active labels"),F&&I&&!E&&u.focusSearch(),B.last().next(v.siblingLabel).addClass(an.active),u.remove.activeLabels(B),D.preventDefault()):C&&!L&&K==ad.backspace&&(u.verbose("Removing last label on input backspace"),B=z.last().addClass(an.active),u.remove.activeLabels(B)):B.removeClass(an.active)}}},keydown:function(E){var L=E.which;if(u.is.inObject(L,ad)){var z,C=am.not(v.unselectable).filter("."+an.selected).eq(0),H=l.children("."+an.active).eq(0),y=C.length>0?C:H,M=y.length>0?y.siblings(":not(."+an.filtered+")").addBack():l.children(":not(."+an.filtered+")"),x=y.children(v.menu),B=y.closest(v.menu),G=B.hasClass(an.visible)||B.hasClass(an.animating)||B.parent(v.menu).length>0,K=x.length>0,F=y.length>0,I=y.not(v.unselectable).length>0,D=L==ad.delimiter&&aq.allowAdditions&&u.is.multiple(),A=aq.allowAdditions&&aq.hideAdditions&&(L==ad.enter||D)&&I;if(A&&(u.verbose("Selecting item from keyboard shortcut",y),u.event.item.click.call(y,E),u.is.searchSelection()&&u.remove.searchTerm()),u.is.visible()){if((L==ad.enter||D)&&(L==ad.enter&&F&&K&&!aq.allowCategorySelection?(u.verbose("Pressed enter on unselectable category, opening sub menu"),L=ad.rightArrow):I&&(u.verbose("Selecting item from keyboard shortcut",y),u.event.item.click.call(y,E),u.is.searchSelection()&&u.remove.searchTerm()),E.preventDefault()),F&&(L==ad.leftArrow&&B[0]!==l[0]&&(u.verbose("Left key pressed, closing sub-menu"),u.animate.hide(!1,B),y.removeClass(an.selected),B.closest(v.item).addClass(an.selected),E.preventDefault()),L==ad.rightArrow&&K&&(u.verbose("Right key pressed, opening sub-menu"),u.animate.show(!1,x),y.removeClass(an.selected),x.find(v.item).eq(0).addClass(an.selected),E.preventDefault())),L==ad.upArrow){if(z=F&&G?y.prevAll(v.item+":not("+v.unselectable+")").eq(0):am.eq(0),M.index(z)<0){return u.verbose("Up key pressed but reached top of current menu"),void E.preventDefault()}u.verbose("Up key pressed, changing active item"),y.removeClass(an.selected),z.addClass(an.selected),u.set.scrollPosition(z),aq.selectOnKeydown&&u.is.single()&&u.set.selectedItem(z),E.preventDefault()}if(L==ad.downArrow){if(z=F&&G?z=y.nextAll(v.item+":not("+v.unselectable+")").eq(0):am.eq(0),0===z.length){return u.verbose("Down key pressed but reached bottom of current menu"),void E.preventDefault()}u.verbose("Down key pressed, changing active item"),am.removeClass(an.selected),z.addClass(an.selected),u.set.scrollPosition(z),aq.selectOnKeydown&&u.is.single()&&u.set.selectedItem(z),E.preventDefault()}L==ad.pageUp&&(u.scrollPage("up"),E.preventDefault()),L==ad.pageDown&&(u.scrollPage("down"),E.preventDefault()),L==ad.escape&&(u.verbose("Escape key pressed, closing dropdown"),u.hide())}else{D&&E.preventDefault(),L!=ad.downArrow||u.is.visible()||(u.verbose("Down key pressed, showing dropdown"),u.show(),E.preventDefault())}}else{u.has.search()||u.set.selectedLetter(String.fromCharCode(L))}}},trigger:{change:function(){var y=d.createEvent("HTMLEvents"),x=ab[0];x&&(u.verbose("Triggering native change event"),y.initEvent("change",!0,!1),x.dispatchEvent(y))}},determine:{selectAction:function(x,y){u.verbose("Determining action",aq.action),c.isFunction(u.action[aq.action])?(u.verbose("Triggering preset action",aq.action,x,y),u.action[aq.action].call(f,x,y,this)):c.isFunction(aq.action)?(u.verbose("Triggering user action",aq.action,x,y),aq.action.call(f,x,y,this)):u.error(aa.action,aq.action)},eventInModule:function(z,y){var x=c(z.target),B=x.closest(d.documentElement).length>0,A=x.closest(ac).length>0;return y=c.isFunction(y)?y:function(){},B&&!A?(u.verbose("Triggering event",y),y(),!0):(u.verbose("Event occurred in dropdown, canceling callback"),!1)},eventOnElement:function(A,z){var y=c(A.target),D=y.closest(v.siblingLabel),B=d.body.contains(A.target),C=0===ac.find(D).length,x=0===y.closest(l).length;return z=c.isFunction(z)?z:function(){},B&&C&&x?(u.verbose("Triggering event",z),z(),!0):(u.verbose("Event occurred in dropdown menu, canceling callback"),!1)}},action:{nothing:function(){},activate:function(y,z,x){if(z=void 0!==z?z:y,u.can.activate(c(x))){if(u.set.selected(z,c(x)),u.is.multiple()&&!u.is.allFiltered()){return}u.hideAndClear()}},select:function(y,z,x){if(z=void 0!==z?z:y,u.can.activate(c(x))){if(u.set.value(z,c(x)),u.is.multiple()&&!u.is.allFiltered()){return}u.hideAndClear()}},combo:function(y,z,x){z=void 0!==z?z:y,u.set.selected(z,c(x)),u.hideAndClear()},hide:function(y,x,z){u.set.value(x,y),u.hideAndClear()}},get:{id:function(){return at},defaultText:function(){return ac.data(af.defaultText)},defaultValue:function(){return ac.data(af.defaultValue)},placeholderText:function(){return"auto"!=aq.placeholder&&"string"==typeof aq.placeholder?aq.placeholder:ac.data(af.placeholderText)||""},text:function(){return Z.text()},query:function(){return c.trim(ag.val())},searchWidth:function(x){return x=void 0!==x?x:ag.val(),ay.text(x),Math.ceil(ay.width()+1)},selectionCount:function(){var x=u.get.values();return u.is.multiple()?c.isArray(x)?x.length:0:""!==u.get.value()?1:0},transition:function(x){return"auto"==aq.transition?u.is.upward(x)?"slide up":"slide down":aq.transition},userValues:function(){var x=u.get.values();return !!x&&(x=c.isArray(x)?x:[x],c.grep(x,function(y){return !1===u.get.item(y)}))},uniqueArray:function(x){return c.grep(x,function(z,y){return c.inArray(z,x)===y})},caretPosition:function(){var z,y,x=ag.get(0);return"selectionStart" in x?x.selectionStart:d.selection?(x.focus(),z=d.selection.createRange(),y=z.text.length,z.moveStart("character",-x.value.length),z.text.length-y):void 0},value:function(){var x=ab.length>0?ab.val():ac.data(af.value),y=c.isArray(x)&&1===x.length&&""===x[0];return void 0===x||y?"":x},values:function(){var x=u.get.value();return""===x?"":!u.has.selectInput()&&u.is.multiple()?"string"==typeof x?x.split(aq.delimiter):"":x},remoteValues:function(){var x=u.get.values(),y=!1;return x&&("string"==typeof x&&(x=[x]),c.each(x,function(B,A){var z=u.read.remoteData(A);u.verbose("Restoring value from session data",z,A),z&&(y||(y={}),y[A]=z)})),y},choiceText:function(x,y){if(y=void 0!==y?y:aq.preserveHTML,x){return x.find(v.menu).length>0&&(u.verbose("Retrieving text of element with sub-menu"),x=x.clone(),x.find(v.menu).remove(),x.find(v.menuIcon).remove()),void 0!==x.data(af.text)?x.data(af.text):y?c.trim(x.html()):c.trim(x.text())}},choiceValue:function(x,y){return y=y||u.get.choiceText(x),!!x&&(void 0!==x.data(af.value)?String(x.data(af.value)):"string"==typeof y?c.trim(y.toLowerCase()):String(y))},inputEvent:function(){var x=ag[0];return !!x&&(void 0!==x.oninput?"input":void 0!==x.onpropertychange?"propertychange":"keyup")},selectValues:function(){var x={};return x.values=[],ac.find("option").each(function(){var B=c(this),z=B.html(),y=B.attr("disabled"),A=void 0!==B.attr("value")?B.attr("value"):z;"auto"===aq.placeholder&&""===A?x.placeholder=z:x.values.push({name:z,value:A,disabled:y})}),aq.placeholder&&"auto"!==aq.placeholder&&(u.debug("Setting placeholder value to",aq.placeholder),x.placeholder=aq.placeholder),aq.sortSelect?(x.values.sort(function(z,y){return z.name>y.name?1:-1}),u.debug("Retrieved and sorted values from select",x)):u.debug("Retrieved values from select",x),x},activeItem:function(){return am.filter("."+an.active)},selectedItem:function(){var x=am.not(v.unselectable).filter("."+an.selected);return x.length>0?x:am.eq(0)},itemWithAdditions:function(y){var x=u.get.item(y),z=u.create.userChoice(y);return z&&z.length>0&&(x=x.length>0?x.add(z):z),x},item:function(z,B){var y,x,A=!1;return z=void 0!==z?z:void 0!==u.get.values()?u.get.values():u.get.text(),y=x?z.length>0:void 0!==z&&null!==z,x=u.is.multiple()&&c.isArray(z),B=""===z||0===z||(B||!1),y&&am.each(function(){var C=c(this),D=u.get.choiceText(C),E=u.get.choiceValue(C,D);if(null!==E&&void 0!==E){if(x){-1===c.inArray(String(E),z)&&-1===c.inArray(D,z)||(A=A?A.add(C):C)}else{if(B){if(u.verbose("Ambiguous dropdown value using strict type check",C,z),E===z||D===z){return A=C,!0}}else{if(String(E)==String(z)||D==z){return u.verbose("Found select item by value",E,z),A=C,!0}}}}}),A}},check:{maxSelections:function(x){return !aq.maxSelections||(x=void 0!==x?x:u.get.selectionCount(),x>=aq.maxSelections?(u.debug("Maximum selection count reached"),aq.useLabels&&(am.addClass(an.filtered),u.add.message(s.maxSelections)),!0):(u.verbose("No longer at maximum selection count"),u.remove.message(),u.remove.filteredItem(),u.is.searchSelection()&&u.filterItems(),!1))}},restore:{defaults:function(){u.clear(),u.restore.defaultText(),u.restore.defaultValue()},defaultText:function(){var x=u.get.defaultText();x===u.get.placeholderText?(u.debug("Restoring default placeholder text",x),u.set.placeholderText(x)):(u.debug("Restoring default text",x),u.set.text(x))},placeholderText:function(){u.set.placeholderText()},defaultValue:function(){var x=u.get.defaultValue();void 0!==x&&(u.debug("Restoring default value",x),""!==x?(u.set.value(x),u.set.selected()):(u.remove.activeItem(),u.remove.selectedItem()))},labels:function(){aq.allowAdditions&&(aq.useLabels||(u.error(aa.labels),aq.useLabels=!0),u.debug("Restoring selected values"),u.create.userLabels()),u.check.maxSelections()},selected:function(){u.restore.values(),u.is.multiple()?(u.debug("Restoring previously selected values and labels"),u.restore.labels()):u.debug("Restoring previously selected values")},values:function(){u.set.initialLoad(),aq.apiSettings&&aq.saveRemoteData&&u.get.remoteValues()?u.restore.remoteValues():u.set.selected(),u.remove.initialLoad()},remoteValues:function(){var x=u.get.remoteValues();u.debug("Recreating selected from session data",x),x&&(u.is.single()?c.each(x,function(z,y){u.set.text(y)}):c.each(x,function(z,y){u.add.label(z,y)}))}},read:{remoteData:function(x){var y;return void 0===b.Storage?void u.error(aa.noStorage):void 0!==(y=sessionStorage.getItem(x))&&y}},save:{defaults:function(){u.save.defaultText(),u.save.placeholderText(),u.save.defaultValue()},defaultValue:function(){var x=u.get.value();u.verbose("Saving default value as",x),ac.data(af.defaultValue,x)},defaultText:function(){var x=u.get.text();u.verbose("Saving default text as",x),ac.data(af.defaultText,x)},placeholderText:function(){var x;!1!==aq.placeholder&&Z.hasClass(an.placeholder)&&(x=u.get.text(),u.verbose("Saving placeholder text as",x),ac.data(af.placeholderText,x))},remoteData:function(x,y){if(void 0===b.Storage){return void u.error(aa.noStorage)}u.verbose("Saving remote data to session storage",y,x),sessionStorage.setItem(y,x)}},clear:function(){u.is.multiple()&&aq.useLabels?u.remove.labels():(u.remove.activeItem(),u.remove.selectedItem()),u.set.placeholderText(),u.clearValue()},clearValue:function(){u.set.value("")},scrollPage:function(C,I){var z,B,F,y=I||u.get.selectedItem(),K=y.closest(v.menu),x=K.outerHeight(),A=K.scrollTop(),E=am.eq(0).outerHeight(),H=Math.floor(x/E),D=(K.prop("scrollHeight"),"up"==C?A-E*H:A+E*H),G=am.not(v.unselectable);F="up"==C?G.index(y)-H:G.index(y)+H,z="up"==C?F>=0:F<G.length,B=z?G.eq(F):"up"==C?G.first():G.last(),B.length>0&&(u.debug("Scrolling page",C,B),y.removeClass(an.selected),B.addClass(an.selected),aq.selectOnKeydown&&u.is.single()&&u.set.selectedItem(B),K.scrollTop(D))},set:{filtered:function(){var B=u.is.multiple(),z=u.is.searchSelection(),D=B&&z,y=z?u.get.query():"",x="string"==typeof y&&y.length>0,C=u.get.searchWidth(),A=""!==y;B&&x&&(u.verbose("Adjusting input width",C,aq.glyphWidth),ag.css("width",C)),x||D&&A?(u.verbose("Hiding placeholder text"),Z.addClass(an.filtered)):(!B||D&&!A)&&(u.verbose("Showing placeholder text"),Z.removeClass(an.filtered))},empty:function(){ac.addClass(an.empty)},loading:function(){ac.addClass(an.loading)},placeholderText:function(x){x=x||u.get.placeholderText(),u.debug("Setting placeholder text",x),u.set.text(x),Z.addClass(an.placeholder)},tabbable:function(){u.is.searchSelection()?(u.debug("Added tabindex to searchable dropdown"),ag.val("").attr("tabindex",0),l.attr("tabindex",-1)):(u.debug("Added tabindex to dropdown"),void 0===ac.attr("tabindex")&&(ac.attr("tabindex",0),l.attr("tabindex",-1)))},initialLoad:function(){u.verbose("Setting initial load"),az=!0},activeItem:function(x){aq.allowAdditions&&x.filter(v.addition).length>0?x.addClass(an.filtered):x.addClass(an.active)},partialSearch:function(y){var x=u.get.query().length;ag.val(y.substr(0,x))},scrollPosition:function(C,G){var z,B,E,y,H,x,A,D,F;C=C||u.get.selectedItem(),z=C.closest(v.menu),B=C&&C.length>0,G=void 0!==G&&G,C&&z.length>0&&B&&(y=C.position().top,z.addClass(an.loading),x=z.scrollTop(),H=z.offset().top,y=C.offset().top,E=x-H+y,G||(A=z.height(),F=x+A<E+5,D=E-5<x),u.debug("Scrolling to active item",E),(G||D||F)&&z.scrollTop(E),z.removeClass(an.loading))},text:function(x){"select"!==aq.action&&("combo"==aq.action?(u.debug("Changing combo button text",x,ae),aq.preserveHTML?ae.html(x):ae.text(x)):(x!==u.get.placeholderText()&&Z.removeClass(an.placeholder),u.debug("Changing text",x,Z),Z.removeClass(an.filtered),aq.preserveHTML?Z.html(x):Z.text(x)))},selectedItem:function(z){var y=u.get.choiceValue(z),A=u.get.choiceText(z,!1),x=u.get.choiceText(z,!0);u.debug("Setting user selection to item",z),u.remove.activeItem(),u.set.partialSearch(A),u.set.activeItem(z),u.set.selected(y,z),u.set.text(x)},selectedLetter:function(z){var B,y=am.filter("."+an.selected),x=y.length>0&&u.has.firstLetter(y,z),A=!1;x&&(B=y.nextAll(am).eq(0),u.has.firstLetter(B,z)&&(A=B)),A||am.each(function(){if(u.has.firstLetter(c(this),z)){return A=c(this),!1}}),A&&(u.verbose("Scrolling to next value with letter",z),u.set.scrollPosition(A),y.removeClass(an.selected),A.addClass(an.selected),aq.selectOnKeydown&&u.is.single()&&u.set.selectedItem(A))},direction:function(x){"auto"==aq.direction?(u.remove.upward(),u.can.openDownward(x)?u.remove.upward(x):u.set.upward(x),u.is.leftward(x)||u.can.openRightward(x)||u.set.leftward(x)):"upward"==aq.direction&&u.set.upward(x)},upward:function(x){(x||ac).addClass(an.upward)},leftward:function(x){(x||l).addClass(an.leftward)},value:function(B,z,D){var y=u.escape.value(B),x=ab.length>0,C=(u.has.value(B),u.get.values()),A=void 0!==B?String(B):B;if(x){if(!aq.allowReselection&&A==C&&(u.verbose("Skipping value update already same value",B,C),!u.is.initialLoad())){return}u.is.single()&&u.has.selectInput()&&u.can.extendSelect()&&(u.debug("Adding user option",B),u.add.optionValue(B)),u.debug("Updating input value",y,C),i=!0,ab.val(y),!1===aq.fireOnInit&&u.is.initialLoad()?u.debug("Input native change event ignored on initial load"):u.trigger.change(),i=!1}else{u.verbose("Storing value in metadata",y,ab),y!==C&&ac.data(af.value,A)}!1===aq.fireOnInit&&u.is.initialLoad()?u.verbose("No callback on initial load",aq.onChange):aq.onChange.call(f,B,z,D)},active:function(){ac.addClass(an.active)},multiple:function(){ac.addClass(an.multiple)},visible:function(){ac.addClass(an.visible)},exactly:function(y,x){u.debug("Setting selected to exact values"),u.clear(),u.set.selected(y,x)},selected:function(y,z){var x=u.is.multiple();(z=aq.allowAdditions?z||u.get.itemWithAdditions(y):z||u.get.item(y))&&(u.debug("Setting selected menu item to",z),u.is.multiple()&&u.remove.searchWidth(),u.is.single()?(u.remove.activeItem(),u.remove.selectedItem()):aq.useLabels&&u.remove.selectedItem(),z.each(function(){var C=c(this),B=u.get.choiceText(C),F=u.get.choiceValue(C,B),D=C.hasClass(an.filtered),E=C.hasClass(an.active),A=C.hasClass(an.addition),G=x&&1==z.length;x?!E||A?(aq.apiSettings&&aq.saveRemoteData&&u.save.remoteData(B,F),aq.useLabels?(u.add.value(F,B,C),u.add.label(F,B,G),u.set.activeItem(C),u.filterActive(),u.select.nextAvailable(z)):(u.add.value(F,B,C),u.set.text(u.add.variables(s.count)),u.set.activeItem(C))):D||(u.debug("Selected active value, removing label"),u.remove.selected(F)):(aq.apiSettings&&aq.saveRemoteData&&u.save.remoteData(B,F),u.set.text(B),u.set.value(F,B,C),C.addClass(an.active).addClass(an.selected))}))}},add:{label:function(z,C,y){var x,B=u.is.searchSelection()?ag:Z,A=u.escape.value(z);if(x=c("<a />").addClass(an.label).attr("data-"+af.value,A).html(o.label(A,C)),x=aq.onLabelCreate.call(x,A,C),u.has.label(z)){return void u.debug("Label already exists, skipping",A)}aq.label.variation&&x.addClass(aq.label.variation),!0===y?(u.debug("Animating in label",x),x.addClass(an.hidden).insertBefore(B).transition(aq.label.transition,aq.label.duration)):(u.debug("Adding selection label",x),x.insertBefore(B))},message:function(y){var z=l.children(v.message),x=aq.templates.message(u.add.variables(y));z.length>0?z.html(x):z=c("<div/>").html(x).addClass(an.message).appendTo(l)},optionValue:function(x){var y=u.escape.value(x);ab.find('option[value="'+u.escape.string(y)+'"]').length>0||(u.disconnect.selectObserver(),u.is.single()&&(u.verbose("Removing previous user addition"),ab.find("option."+an.addition).remove()),c("<option/>").prop("value",y).addClass(an.addition).html(x).appendTo(ab),u.verbose("Adding user addition as an <option>",x),u.observe.select())},userSuggestion:function(A){var z,C=l.children(v.addition),y=u.get.item(A),x=y&&y.not(v.addition).length,B=C.length>0;if(!aq.useLabels||!u.has.maxSelections()){if(""===A||x){return void C.remove()}B?(C.data(af.value,A).data(af.text,A).attr("data-"+af.value,A).attr("data-"+af.text,A).removeClass(an.filtered),aq.hideAdditions||(z=aq.templates.addition(u.add.variables(s.addResult,A)),C.html(z)),u.verbose("Replacing user suggestion with new value",C)):(C=u.create.userChoice(A),C.prependTo(l),u.verbose("Adding item choice to menu corresponding with user choice addition",C)),aq.hideAdditions&&!u.is.allFiltered()||C.addClass(an.selected).siblings().removeClass(an.selected),u.refreshItems()}},variables:function(B,z){var D,y,x=-1!==B.search("{count}"),C=-1!==B.search("{maxCount}"),A=-1!==B.search("{term}");return u.verbose("Adding templated variables to message",B),x&&(D=u.get.selectionCount(),B=B.replace("{count}",D)),C&&(D=u.get.selectionCount(),B=B.replace("{maxCount}",aq.maxSelections)),A&&(y=z||u.get.query(),B=B.replace("{term}",y)),B},value:function(z,B,y){var x,A=u.get.values();if(""===z){return void u.debug("Cannot select blank values from multiselect")}c.isArray(A)?(x=A.concat([z]),x=u.get.uniqueArray(x)):x=[z],u.has.selectInput()?u.can.extendSelect()&&(u.debug("Adding value to select",z,x,ab),u.add.optionValue(z)):(x=x.join(aq.delimiter),u.debug("Setting hidden input to delimited value",x,ab)),!1===aq.fireOnInit&&u.is.initialLoad()?u.verbose("Skipping onadd callback on initial load",aq.onAdd):aq.onAdd.call(f,z,B,y),u.set.value(x,z,B,y),u.check.maxSelections()}},remove:{active:function(){ac.removeClass(an.active)},activeLabel:function(){ac.find(v.label).removeClass(an.active)},empty:function(){ac.removeClass(an.empty)},loading:function(){ac.removeClass(an.loading)},initialLoad:function(){az=!1},upward:function(x){(x||ac).removeClass(an.upward)},leftward:function(x){(x||l).removeClass(an.leftward)},visible:function(){ac.removeClass(an.visible)},activeItem:function(){am.removeClass(an.active)},filteredItem:function(){aq.useLabels&&u.has.maxSelections()||(aq.useLabels&&u.is.multiple()?am.not("."+an.active).removeClass(an.filtered):am.removeClass(an.filtered),u.remove.empty())},optionValue:function(y){var x=u.escape.value(y),z=ab.find('option[value="'+u.escape.string(x)+'"]');z.length>0&&z.hasClass(an.addition)&&(ar&&(ar.disconnect(),u.verbose("Temporarily disconnecting mutation observer")),z.remove(),u.verbose("Removing user addition as an <option>",x),ar&&ar.observe(ab[0],{childList:!0,subtree:!0}))},message:function(){l.children(v.message).remove()},searchWidth:function(){ag.css("width","")},searchTerm:function(){u.verbose("Cleared search term"),ag.val(""),u.set.filtered()},userAddition:function(){am.filter(v.addition).remove()},selected:function(x,y){if(!(y=aq.allowAdditions?y||u.get.itemWithAdditions(x):y||u.get.item(x))){return !1}y.each(function(){var A=c(this),B=u.get.choiceText(A),z=u.get.choiceValue(A,B);u.is.multiple()?aq.useLabels?(u.remove.value(z,B,A),u.remove.label(z)):(u.remove.value(z,B,A),0===u.get.selectionCount()?u.set.placeholderText():u.set.text(u.add.variables(s.count))):u.remove.value(z,B,A),A.removeClass(an.filtered).removeClass(an.active),aq.useLabels&&A.removeClass(an.selected)})},selectedItem:function(){am.removeClass(an.selected)},value:function(A,z,B){var y,x=u.get.values();u.has.selectInput()?(u.verbose("Input is <select> removing selected option",A),y=u.remove.arrayValue(A,x),u.remove.optionValue(A)):(u.verbose("Removing from delimited values",A),y=u.remove.arrayValue(A,x),y=y.join(aq.delimiter)),!1===aq.fireOnInit&&u.is.initialLoad()?u.verbose("No callback on initial load",aq.onRemove):aq.onRemove.call(f,A,z,B),u.set.value(y,z,B),u.check.maxSelections()},arrayValue:function(x,y){return c.isArray(y)||(y=[y]),y=c.grep(y,function(z){return x!=z}),u.verbose("Removed value from delimited string",x,y),y},label:function(z,y){var A=ac.find(v.label),x=A.filter("[data-"+af.value+'="'+u.escape.string(z)+'"]');u.verbose("Removing label",x),x.remove()},activeLabels:function(x){x=x||ac.find(v.label).filter("."+an.active),u.verbose("Removing active label selections",x),u.remove.labels(x)},labels:function(x){x=x||ac.find(v.label),u.verbose("Removing labels",x),x.each(function(){var A=c(this),B=A.data(af.value),z=void 0!==B?String(B):B,y=u.is.userValue(z);if(!1===aq.onLabelRemove.call(A,B)){return void u.debug("Label remove callback cancelled removal")}u.remove.message(),y?(u.remove.value(z),u.remove.label(z)):u.remove.selected(z)})},tabbable:function(){u.is.searchSelection()?(u.debug("Searchable dropdown initialized"),ag.removeAttr("tabindex"),l.removeAttr("tabindex")):(u.debug("Simple selection dropdown initialized"),ac.removeAttr("tabindex"),l.removeAttr("tabindex"))}},has:{menuSearch:function(){return u.has.search()&&ag.closest(l).length>0},search:function(){return ag.length>0},sizer:function(){return ay.length>0},selectInput:function(){return ab.is("select")},minCharacters:function(x){return !aq.minCharacters||(x=void 0!==x?String(x):String(u.get.query()),x.length>=aq.minCharacters)},firstLetter:function(z,y){var A,x;return !(!z||0===z.length||"string"!=typeof y)&&(A=u.get.choiceText(z,!1),y=y.toLowerCase(),x=String(A).charAt(0).toLowerCase(),y==x)},input:function(){return ab.length>0},items:function(){return am.length>0},menu:function(){return l.length>0},message:function(){return 0!==l.children(v.message).length},label:function(y){var x=u.escape.value(y);return ac.find(v.label).filter("[data-"+af.value+'="'+u.escape.string(x)+'"]').length>0},maxSelections:function(){return aq.maxSelections&&u.get.selectionCount()>=aq.maxSelections},allResultsFiltered:function(){var x=am.not(v.addition);return x.filter(v.unselectable).length===x.length},userSuggestion:function(){return l.children(v.addition).length>0},query:function(){return""!==u.get.query()},value:function(x){var y=u.get.values();return !!(c.isArray(y)?y&&-1!==c.inArray(x,y):y==x)}},is:{active:function(){return ac.hasClass(an.active)},bubbledLabelClick:function(x){return c(x.target).is("select, input")&&ac.closest("label").length>0},bubbledIconClick:function(x){return c(x.target).closest(r).length>0},alreadySetup:function(){return ac.is("select")&&void 0!==ac.parent(v.dropdown).data(ai)&&0===ac.prev().length},animating:function(x){return x?x.transition&&x.transition("is animating"):l.transition&&l.transition("is animating")},leftward:function(x){return(x||l).hasClass(an.leftward)},disabled:function(){return ac.hasClass(an.disabled)},focused:function(){return d.activeElement===ac[0]},focusedOnSearch:function(){return d.activeElement===ag[0]},allFiltered:function(){return(u.is.multiple()||u.has.search())&&!(0==aq.hideAdditions&&u.has.userSuggestion())&&!u.has.message()&&u.has.allResultsFiltered()},hidden:function(x){return !u.is.visible(x)},initialLoad:function(){return az},inObject:function(y,z){var x=!1;return c.each(z,function(A,B){if(B==y){return x=!0,!0}}),x},multiple:function(){return ac.hasClass(an.multiple)},remote:function(){return aq.apiSettings&&u.can.useAPI()},single:function(){return !u.is.multiple()},selectMutation:function(x){var y=!1;return c.each(x,function(A,z){if(z.target&&c(z.target).is("select")){return y=!0,!0}}),y},search:function(){return ac.hasClass(an.search)},searchSelection:function(){return u.has.search()&&1===ag.parent(v.dropdown).length},selection:function(){return ac.hasClass(an.selection)},userValue:function(x){return -1!==c.inArray(x,u.get.userValues())},upward:function(x){return(x||ac).hasClass(an.upward)},visible:function(x){return x?x.hasClass(an.visible):l.hasClass(an.visible)},verticallyScrollableContext:function(){var x=ap.get(0)!==b&&ap.css("overflow-y");return"auto"==x||"scroll"==x},horizontallyScrollableContext:function(){var x=ap.get(0)!==b&&ap.css("overflow-X");return"auto"==x||"scroll"==x}},can:{activate:function(x){return !!aq.useLabels||(!u.has.maxSelections()||!(!u.has.maxSelections()||!x.hasClass(an.active)))},openDownward:function(A){var z,B=A||l,y=!0,x={};return B.addClass(an.loading),z={context:{scrollTop:ap.scrollTop(),height:ap.outerHeight()},menu:{offset:B.offset(),height:B.outerHeight()}},u.is.verticallyScrollableContext()&&(z.menu.offset.top+=z.context.scrollTop),x={above:z.context.scrollTop<=z.menu.offset.top-z.menu.height,below:z.context.scrollTop+z.context.height>=z.menu.offset.top+z.menu.height},x.below?(u.verbose("Dropdown can fit in context downward",x),y=!0):x.below||x.above?(u.verbose("Dropdown cannot fit below, opening upward",x),y=!1):(u.verbose("Dropdown cannot fit in either direction, favoring downward",x),y=!0),B.removeClass(an.loading),y},openRightward:function(A){var z,B=A||l,y=!0,x=!1;return B.addClass(an.loading),z={context:{scrollLeft:ap.scrollLeft(),width:ap.outerWidth()},menu:{offset:B.offset(),width:B.outerWidth()}},u.is.horizontallyScrollableContext()&&(z.menu.offset.left+=z.context.scrollLeft),x=z.menu.offset.left+z.menu.width>=z.context.scrollLeft+z.context.width,x&&(u.verbose("Dropdown cannot fit in context rightward",x),y=!1),B.removeClass(an.loading),y},click:function(){return h||"click"==aq.on},extendSelect:function(){return aq.allowAdditions||aq.apiSettings},show:function(){return !u.is.disabled()&&(u.has.items()||u.has.message())},useAPI:function(){return void 0!==c.fn.api}},animate:{show:function(z,B){var y,x=B||l,A=B?function(){}:function(){u.hideSubMenus(),u.hideOthers(),u.set.active()};z=c.isFunction(z)?z:function(){},u.verbose("Doing menu show animation",x),u.set.direction(B),y=u.get.transition(B),u.is.selection()&&u.set.scrollPosition(u.get.selectedItem(),!0),(u.is.hidden(x)||u.is.animating(x))&&("none"==y?(A(),x.transition("show"),z.call(f)):void 0!==c.fn.transition&&ac.transition("is supported")?x.transition({animation:y+" in",debug:aq.debug,verbose:aq.verbose,duration:aq.duration,queue:!0,onStart:A,onComplete:function(){z.call(f)}}):u.error(aa.noTransition,y))},hide:function(z,B){var y=B||l,x=(B?aq.duration:aq.duration,B?function(){}:function(){u.can.click()&&u.unbind.intent(),u.remove.active()}),A=u.get.transition(B);z=c.isFunction(z)?z:function(){},(u.is.visible(y)||u.is.animating(y))&&(u.verbose("Doing menu hide animation",y),"none"==A?(x(),y.transition("hide"),z.call(f)):void 0!==c.fn.transition&&ac.transition("is supported")?y.transition({animation:A+" out",duration:aq.duration,debug:aq.debug,verbose:aq.verbose,queue:!0,onStart:x,onComplete:function(){z.call(f)}}):u.error(aa.transition))}},hideAndClear:function(){u.remove.searchTerm(),u.has.maxSelections()||(u.has.search()?u.hide(function(){u.remove.filteredItem()}):u.hide())},delay:{show:function(){u.verbose("Delaying show event to ensure user intent"),clearTimeout(u.timer),u.timer=setTimeout(u.show,aq.delay.show)},hide:function(){u.verbose("Delaying hide event to ensure user intent"),clearTimeout(u.timer),u.timer=setTimeout(u.hide,aq.delay.hide)}},escape:{value:function(z){var C=c.isArray(z),y="string"==typeof z,x=!y&&!C,B=y&&-1!==z.search(au.quote),A=[];return x||!B?z:(u.debug("Encoding quote values for use in select",z),C?(c.each(z,function(E,D){A.push(D.replace(au.quote,"&quot;"))}),A):z.replace(au.quote,"&quot;"))},string:function(x){return x=String(x),x.replace(au.escape,"\\$&")}},setting:function(x,y){if(u.debug("Changing setting",x,y),c.isPlainObject(x)){c.extend(!0,aq,x)}else{if(void 0===y){return aq[x]}c.isPlainObject(aq[x])?c.extend(!0,aq[x],y):aq[x]=y}},internal:function(x,y){if(c.isPlainObject(x)){c.extend(!0,u,x)}else{if(void 0===y){return u[x]}u[x]=y}},debug:function(){!aq.silent&&aq.debug&&(aq.performance?u.performance.log(arguments):(u.debug=Function.prototype.bind.call(console.info,console,aq.name+":"),u.debug.apply(console,arguments)))},verbose:function(){!aq.silent&&aq.verbose&&aq.debug&&(aq.performance?u.performance.log(arguments):(u.verbose=Function.prototype.bind.call(console.info,console,aq.name+":"),u.verbose.apply(console,arguments)))},error:function(){aq.silent||(u.error=Function.prototype.bind.call(console.error,console,aq.name+":"),u.error.apply(console,arguments))},performance:{log:function(z){var y,A,x;aq.performance&&(y=(new Date).getTime(),x=n||y,A=y-x,n=y,t.push({Name:z[0],Arguments:[].slice.call(z,1)||"",Element:f,"Execution Time":A})),clearTimeout(u.performance.timer),u.performance.timer=setTimeout(u.performance.display,500)},display:function(){var x=aq.name+":",y=0;n=!1,clearTimeout(u.performance.timer),c.each(t,function(A,z){y+=z["Execution Time"]}),x+=" "+y+"ms",e&&(x+=" '"+e+"'"),(void 0!==console.group||void 0!==console.table)&&t.length>0&&(console.groupCollapsed(x),console.table?console.table(t):c.each(t,function(A,z){console.log(z.Name+": "+z["Execution Time"]+"ms")}),console.groupEnd()),t=[]}},invoke:function(z,D,y){var C,A,B,x=ah;return D=D||k,y=f||y,"string"==typeof z&&void 0!==x&&(z=z.split(/[\. ]/),C=z.length-1,c.each(z,function(G,F){var E=G!=C?F+z[G+1].charAt(0).toUpperCase()+z[G+1].slice(1):z;if(c.isPlainObject(x[E])&&G!=C){x=x[E]}else{if(void 0!==x[E]){return A=x[E],!1}if(!c.isPlainObject(x[F])||G==C){return void 0!==x[F]?(A=x[F],!1):(u.error(aa.method,z),!1)}x=x[F]}})),c.isFunction(A)?B=A.apply(y,D):void 0!==A&&(B=A),c.isArray(p)?p.push(B):void 0!==p?p=[p,B]:void 0!==B&&(p=B),A}},q?(void 0===ah&&u.initialize(),u.invoke(m)):(void 0!==ah&&ah.invoke("destroy"),u.initialize())}),void 0!==p?p:g},c.fn.dropdown.settings={silent:!1,debug:!1,verbose:!1,performance:!0,on:"click",action:"activate",values:!1,apiSettings:!1,selectOnKeydown:!0,minCharacters:0,filterRemoteData:!1,saveRemoteData:!0,throttle:200,context:b,direction:"auto",keepOnScreen:!0,match:"both",fullTextSearch:!1,placeholder:"auto",preserveHTML:!0,sortSelect:!1,forceSelection:!0,allowAdditions:!1,hideAdditions:!0,maxSelections:!1,useLabels:!0,delimiter:",",showOnFocus:!0,allowReselection:!1,allowTab:!0,allowCategorySelection:!1,fireOnInit:!1,transition:"auto",duration:200,glyphWidth:1.037,label:{transition:"scale",duration:200,variation:!1},delay:{hide:300,show:200,search:20,touch:50},onChange:function(g,f,h){},onAdd:function(g,f,h){},onRemove:function(g,f,h){},onLabelSelect:function(f){},onLabelCreate:function(e,f){return c(this)},onLabelRemove:function(f){return !0},onNoResults:function(f){return !0},onShow:function(){},onHide:function(){},name:"Dropdown",namespace:"dropdown",message:{addResult:"Add <b>{term}</b>",count:"{count} selected",maxSelections:"Max {maxCount} selections",noResults:"No results found.",serverError:"There was an error contacting the server"},error:{action:"You called a dropdown action that was not defined",alreadySetup:"Once a select has been initialized behaviors must be called on the created ui dropdown",labels:"Allowing user additions currently requires the use of labels.",missingMultiple:"<select> requires multiple property to be set to correctly preserve multiple values",method:"The method you called is not defined.",noAPI:"The API module is required to load resources remotely",noStorage:"Saving remote data requires session storage",noTransition:"This module requires ui transitions <https://github.com/Semantic-Org/UI-Transition>"},regExp:{escape:/[-[\]{}()*+?.,\\^$|#\s]/g,quote:/"/g},metadata:{defaultText:"defaultText",defaultValue:"defaultValue",placeholderText:"placeholder",text:"text",value:"value"},fields:{remoteValues:"results",values:"values",disabled:"disabled",name:"name",value:"value",text:"text"},keys:{backspace:8,delimiter:188,deleteKey:46,enter:13,escape:27,pageUp:33,pageDown:34,leftArrow:37,upArrow:38,rightArrow:39,downArrow:40},selector:{addition:".addition",dropdown:".ui.dropdown",hidden:".hidden",icon:"> .dropdown.icon",input:'> input[type="hidden"], > select',item:".item",label:"> .label",remove:"> .label > .delete.icon",siblingLabel:".label",menu:".menu",message:".message",menuIcon:".dropdown.icon",search:"input.search, .menu > .search > input, .menu input.search",sizer:"> input.sizer",text:"> .text:not(.icon)",unselectable:".disabled, .filtered"},className:{active:"active",addition:"addition",animating:"animating",disabled:"disabled",empty:"empty",dropdown:"ui dropdown",filtered:"filtered",hidden:"hidden transition",item:"item",label:"ui label",loading:"loading",menu:"menu",message:"message",multiple:"multiple",placeholder:"default",sizer:"sizer",search:"search",selected:"selected",selection:"selection",upward:"upward",leftward:"left",visible:"visible"}},c.fn.dropdown.settings.templates={dropdown:function(f){var g=f.placeholder||!1,e=(f.values,"");return e+='<i class="dropdown icon"></i>',f.placeholder?e+='<div class="default text">'+g+"</div>":e+='<div class="text"></div>',e+='<div class="menu">',c.each(f.values,function(i,h){e+=h.disabled?'<div class="disabled item" data-value="'+h.value+'">'+h.name+"</div>":'<div class="item" data-value="'+h.value+'">'+h.name+"</div>"}),e+="</div>"},menu:function(g,h){var f=g[h.values]||{},e="";return c.each(f,function(l,k){var j=k[h.text]?'data-text="'+k[h.text]+'"':"",m=k[h.disabled]?"disabled ":"";e+='<div class="'+m+'item" data-value="'+k[h.value]+'"'+j+">",e+=k[h.name],e+="</div>"}),e},label:function(g,f){return f+'<i class="delete icon"></i>'},message:function(f){return f},addition:function(f){return f}}}(jQuery,window,document);